<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información de Factura</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        /* Estilo adicional para las tablas internas */
        table table {
            border: none; /* Elimina los bordes de la tabla interna */
            width: 100%;
            margin: 0; /* Elimina los márgenes internos de la tabla interna */
        }
    </style>
</head>
<body>
    <h2>Información de Factura</h2>

    <table id="facturaTable">
        <thead>
            <tr>
                <th>Campo</th>
                <th>Valor</th>
            </tr>
        </thead>
        <tbody>
            <!-- Filas de la tabla se llenarán dinámicamente con JavaScript -->
        </tbody>
    </table>
    <h2>Información de Factura</h2>
    <ul id="facturaList"></ul>
    <script>
        // Datos simulados (reemplaza con tus datos reales)
        /*const facturaData = {
            idTransaccion: '1316847568',
            transaction_amount: '19390',
            status: 'approved',
            // ... otros campos ...
        };*/
// Realizar la solicitud al backend para obtener datos
fetch(`/facturadatos`)
    .then(response => response.json())
    .then(data => { 

     // Obtener el contenedor de la tabla
     const tabla = document.getElementById("facturaTable");

// Crear la fila de encabezado
const filaEncabezado = tabla.insertRow();

// Llenar la fila de encabezado con los nombres de los campos
Object.keys(data[0]).forEach(campo => {
    const th = document.createElement("th");
    th.textContent = campo;
    filaEncabezado.appendChild(th);
});

// Crear filas de datos para cada registro
data.forEach(registro => {
    const filaDatos = tabla.insertRow();
    // Llenar la fila de datos con los valores de cada campo
    Object.values(registro).forEach(valor => {
        const td = document.createElement("td");
        if (typeof valor === 'object') {
            // Si es un objeto, mostrar los datos en una tabla interna
            const tablaInterna = document.createElement("table");
            tablaInterna.border = "1"; // Agregar bordes a la tabla interna
            Object.entries(valor).forEach(([clave, val]) => {
                const fila = tablaInterna.insertRow();
                const celdaClave = fila.insertCell(0);
                const celdaValor = fila.insertCell(1);
                celdaClave.textContent = clave;
                celdaValor.textContent = JSON.stringify(val);
            });
            td.appendChild(tablaInterna);
        } else {
            // Si no es un objeto, mostrar el valor directamente
            td.textContent = JSON.stringify(valor);
        }
        filaDatos.appendChild(td);
    });
});
    })
   .catch(error => console.error('Error al obtener datos:', error));
    </script>
</body>
</html>